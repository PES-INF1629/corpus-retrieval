<%- content_for(:title){"Get issues from Github"} %>

<a href="https://github.com/ninofabrizio/corpus-retrieval"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/652c5b9acfaddf3a9c326fa6bde407b87f7be0f4/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"></a>

<hgroup class="big-title">
	<h1>Corpus Retrieval</h1>
	<h2>of GitHub issues</h2>
</hgroup>

<%= form_tag search_readmes_path do |f| %>
    <input name="query">
    <input value="Search" type="submit">
    <br>
    <select name="match">
        <option value="best match">best match</option>
        <option value="most stars">most commented</option>
        <option value="fewest stars">least commented</option>
        <option value="most forks">newest</option>
        <option value="fewest fork">oldest</option>
        <option value="recently updated">recently updated</option>
        <option value="least recently updated">least recently updated</option>
    </select>
    <select name="label">
        <option value="">without label</option>
        <option value="bug">bug</option>
        <option value="duplicate">duplicate</option>
        <option value="enhancement">enhancement</option>
        <option value="help wanted">help wanted</option>
        <option value="invalid">invalid</option>
    </select>
    <input name="comments" type="checkbox">Get comments
<% end %>

<div id="readmes-sets-container">
  <h2>Issues of another queries</h2>
  <ul class="readmes-sets">
    <%- @sets.each do |set| %>
      <li class="readmes-set">
        <p class="query"><%= set.query %></p>
        <p><%= set.created_at.to_formatted_s(:short) %></p>
        <% if set.finished? %>
          <p><%= link_to "(Download)", readme_download_path(set) %></p>
        <% else %>
          <p>(<%= set.status_name.capitalize %>)</p>
        <% end %>
      </li>
    <%- end %>
  </ul>
</div>

<p id="demo"></p>

<script>
var reloadTimer = setInterval(reloadPage,30000)

function reloadPage () {
    location.reload()
}
</script>